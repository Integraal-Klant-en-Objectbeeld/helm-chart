apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ include "iko.fullname" . }}
  labels:
    {{- include "iko.labels" . | nindent 4 }}
data:
  # Spring Boot configuratie
  SPRING_PROFILES_ACTIVE: {{ .Values.settings.spring.profiles.active | quote }}
  SERVER_PORT: {{ .Values.settings.iko.serverPort | quote }}
  
  # Database configuratie
  SPRING_DATASOURCE_URL: {{ .Values.settings.spring.datasource.url | quote }}
  SPRING_DATASOURCE_USERNAME: {{ .Values.settings.spring.datasource.username | quote }}
  SPRING_DATASOURCE_DRIVER-CLASS-NAME: {{ .Values.settings.spring.datasource.driverClassName | quote }}
  SPRING_JPA_PROPERTIES_HIBERNATE_DIALECT: {{ .Values.settings.spring.jpa.properties.hibernateDialect }}
  
  # OAuth2 en Security configuratie
  SPRING_SECURITY_OAUTH2_CLIENT_PROVIDER_KEYCLOAK_ISSUERURI: {{ printf "%s/realms/%s" .Values.settings.keycloak.authServerURL .Values.settings.keycloak.realm | quote }}
  SPRING_SECURITY_OAUTH2_CLIENT_REGISTRATION_KEYCLOAK_CLIENTID: {{ .Values.settings.keycloak.clientID | quote }}
  SPRING_SECURITY_OAUTH2_RESOURCESERVER_JWT_ISSUERURI: {{ printf "%s/realms/%s" .Values.settings.keycloak.authServerURL .Values.settings.keycloak.realm | quote }}
  
  # Actuator configuratie
  MANAGEMENT_ENDPOINTS_WEB_BASE_PATH: {{ .Values.settings.management.endpoints.web.basePath | quote }}
  MANAGEMENT_ENDPOINTS_WEB_EXPOSURE_INCLUDE: {{ .Values.settings.management.endpoints.web.exposure.include | quote }}
  MANAGEMENT_ENDPOINT_HEALTH_ENABLED: {{ .Values.settings.management.endpoint.health.enabled | quote }}
  MANAGEMENT_ENDPOINT_HEALTH_SHOW_DETAILS: {{ .Values.settings.management.endpoint.health.showDetails | quote }}
  MANAGEMENT_ENDPOINT_HEALTH_PROBES_ENABLED: {{ .Values.settings.management.endpoint.health.probes.enabled | quote }}

  # IKO bronnen configuratie
  IKO_CONNECTORS_BRP_ENABLED: {{ .Values.settings.iko.connectors.brp.enabled | quote }}
  IKO_CONNECTORS_BRP_HOST: {{ .Values.settings.iko.connectors.brp.host | quote }}
  IKO_CONNECTORS_BRP_SPECIFICATIONURI: {{ .Values.settings.iko.connectors.brp.specificationuri | quote }}
  IKO_CONNECTORS_OBJECTENAPI_ENABLED: {{ .Values.settings.iko.connectors.objects.enabled | quote }}
  IKO_CONNECTORS_OBJECTENAPI_HOST: {{ .Values.settings.iko.connectors.objects.host | quote }}
  IKO_CONNECTORS_OBJECTENAPI_SPECIFICATIONURI: {{ .Values.settings.iko.connectors.objects.specificationuri | default (printf "%s/api/v2/schema/openapi.yaml" .Values.settings.iko.connectors.objects.host) | quote }}
  IKO_CONNECTORS_OPENZAAK_ENABLED: {{ .Values.settings.iko.connectors.openzaak.enabled | quote }}
  IKO_CONNECTORS_OPENZAAK_HOST: {{ .Values.settings.iko.connectors.openzaak.host | quote }}
  IKO_CONNECTORS_OPENZAAK_CLIENTID: {{ .Values.settings.iko.connectors.openzaak.clientId | quote }}
  IKO_CONNECTORS_OPENZAAK_SPECIFICATIONURI: {{ .Values.settings.iko.connectors.openzaak.specificationuri | default ( printf "%s/zaken/api/v1/schema/openapi.yaml" .Values.settings.iko.connectors.openzaak.host ) | quote }}
  IKO_CONNECTORS_BAG_ENABLED: {{ .Values.settings.iko.connectors.bag.enabled | quote }}
  IKO_CONNECTORS_BAG_HOST: {{ .Values.settings.iko.connectors.bag.host | quote }}
  IKO_CONNECTORS_BAG_SPECIFICATIONURI: {{ .Values.settings.iko.connectors.bag.specificationuri | default ( printf "%s/lvbag/individuelebevragingen/v2/openapi.yaml" .Values.settings.iko.connectors.bag.host ) | quote }}
  IKO_CONNECTORS_OPENKLANT_ENABLED: {{ .Values.settings.iko.connectors.openklant.enabled | quote }}
  IKO_CONNECTORS_OPENKLANT_HOST: {{ .Values.settings.iko.connectors.openklant.host | quote }}
  IKO_CONNECTORS_OPENKLANT_SPECIFICATIONURI: {{ .Values.settings.iko.connectors.openklant.specificationuri | default ( printf "%s/api/v2/schema/openapi.yaml" .Values.settings.iko.connectors.openklant.host ) | quote }}
